<div style="width:600px; margin:0 auto;">
<br>
<h5><i><%= link_to "Twentiments > " , :friends  %><%= "@" + @friend.twitterHandle %></i></h5>
<div class="row" >
        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text" style="background-color:<%= @scoreColor %>" >
              <span class="card-title">	<img src="<%= @tweets[0].user.profile_image_url%>"> <%= @friend.firstName %> 
              	<i><%=link_to "@" + @friend.twitterHandle, "http://twitter.com/" + @friend.twitterHandle %></i>
              </span>
              <p><%= @tweets[0].text %></p>
            </div>
            <div class="card-action" style="background-color:<%= @scoreColor %>">
              <h4><%= @score %></h4>
              
            </div>

          </div>
        </div>


        <div class="col s12 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text hoverCard" style="background-color:<%= @scoreColor %>" >
              <span class="card-title"> <img src="<%= @tweets[9].user.profile_image_url%>"> <%= @friend.firstName %> 
                <i><%=link_to "@" + @friend.twitterHandle, "http://twitter.com/" + @friend.twitterHandle %></i>
              </span>
              <p><div id='reporting'></div></p>
            </div>
            <div class="card-action hoverCard" style="background-color:<%= @scoreColor %>">
              <h4><div id='hoverScore'>--</div></h4>
              
            </div>

          </div>
        </div>



      </div>
      
<div id="container" style="width:100%; height:400px;"></div>


      <script>
$(function () {
    var $reporting = $('#reporting');
    var $hoverScore = $('#hoverScore');
    var colorArray = [      "#CC0033",  
                            "#CC0033",  
                            "#CC0033",  
                            "#B61945",  
                            "#A13256",
                            "#607D8B",  
                            "#458E75",  
                            "#3C936D",  
                            "#339966",  
                            "#339966",  
                            "#339966" ]
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'area'
        },  

        title: {
            text: ""
        },
        xAxis: {

            categories: ['','','','','','','','','',"Latest Tweet"]
        },
        yAxis: {
            min: 0,
            max: 100,
            title: {
              text: "Sentiment Analysis Scores"
            }
        },
        
        series: [{
            showInLegend: false,
            data: [{
                y: <%= @historicalScores[9] %>,
                tweet: "<%= @tweets[9].text.gsub(/['\n']/,' ') %>"
            }, {
                y: <%= @historicalScores[8] %>,
                tweet: "<%= @tweets[8].text.gsub(/['\n']/,' ') %>"
            }, {
                y: <%= @historicalScores[7] %>,
                tweet: "<%= @tweets[7].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[6] %>,
                tweet: "<%= @tweets[6].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[5] %>,
                tweet: "<%= @tweets[5].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[4] %>,
                tweet: "<%= @tweets[4].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[3] %>,
                tweet: "<%= @tweets[3].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[2] %>,
                tweet: "<%= @tweets[2].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[1] %>,
                tweet: "<%= @tweets[1].text.gsub(/['\n']/,' ') %>"
            },{
                y: <%= @historicalScores[0] %>,
                tweet: "<%= @tweets[0].text.gsub(/['\n']/,' ') %>"
            }]
        }],
        plotOptions: {
            series: {
                point: {
                    events: {
                        mouseOver: function () {
                            $reporting.html(this.tweet);
                            $hoverScore.html(this.y);
                            $('.hoverCard').css('background-color', colorArray[Math.round((this.y)/10)]);
                        }
                    }
                }

            }
        },


        tooltip: {
            formatter: function() {return ' ' +
                'Score: ' + this.point.y
                ;
            }
        }
    });
});
</script>
